<%- include("../components/nav") %>
<% if (typeof message !== 'undefined' && message) { %>
    <h1><%=message%></h1>
<% } else { %>
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div style="display: flex; align-items: center; gap: 30px;">
                <div class="github-icons">
                    <i class="fab fa-github"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-code-branch"></i>
                    <i class="far fa-bookmark"></i>
                </div>
                <h1 class="header-title">Course <sup>4</sup> arab</h1>
            </div>
            <div class="search-box">
                <form action="/search" method="post">
                    <input type="text" name="search" class="search-input" id="searchInput" placeholder="Search">
                    <button class="search-btn" id="searchBtn">Search</button>
                </form>
            </div>
        </div>
        
        <!-- Table -->
        <div class="table-container">
            <table class="custom-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Full Name</th>
                        <th>Gender</th>
                        <th>Age</th>
                        <th>Country</th>
                        <th>Last updated</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <% data.forEach(element => { %>
                        <tr data-id="1">
                            <td><%= element["id"]%></td>
                            <td><%= element["name"]%></td>
                            <td><%= element["gender"]%></td>
                            <td><%= element["age"]%></td>
                            <!-- <td><%= element["country"]%></td> -->
                            <td><%= element.country ? element.country.name : "No Country" %></td>
                            <td><%= moment(element["updatedAt"]).format("MMM Do YY")%></td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn view-btn" onclick="window.location.href='/show-customer/<%=element._id%>'">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn edit-btn" onclick="window.location.href='/edit-customer/<%=element._id%>'">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <form action="/delete-customer/<%= element._id %>?_method=DELETE" method="POST">
                                        <button class="action-btn delete-btn">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <%}%>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/index.js"></script>
</body>
</html>